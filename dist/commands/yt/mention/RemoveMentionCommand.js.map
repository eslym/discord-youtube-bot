{"version":3,"sources":["../src/commands/yt/mention/RemoveMentionCommand.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,kDAAkE;AAClE,4CAAuC;AACvC,gDAA2C;AAE9B,QAAA,oBAAoB,GAAe;IAC5C,UAAU,EAAE,IAAI,wCAA6B,EAAE;SAC1C,OAAO,CAAC,QAAQ,CAAC;SACjB,cAAc,CAAC,+CAA+C,CAAC;SAC/D,eAAe,CACZ,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC;SAC3B,cAAc,CAAC,oBAAoB,CAAC;SACpC,WAAW,CAAC,IAAI,CAAC,CACzB;SACA,oBAAoB,CACjB,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;SACxB,cAAc,CAAC,aAAa,CAAC;SAC7B,WAAW,CAAC,IAAI,CAAC,CACzB;IAEC,MAAM,CAAC,WAAW;;YACpB,IAAI,MAAM,GAAG,MAAM,SAAG,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;YACvD,IAAG,CAAC,MAAM,EAAC;gBACP,OAAO;aACV;YACD,IAAI,EAAC,YAAY,EAAE,WAAW,EAAC,GAAG,MAAM,CAAC;YACzC,IAAI,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;YACvE,IAAG,YAAY,CAAC,OAAO,EAAC;gBACpB,YAAY,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBACjE,IAAG,YAAY,CAAC,OAAO,KAAK,EAAE,EAAC;oBAC3B,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC;iBAC/B;aACJ;YACD,IAAG,YAAY,CAAC,OAAO,EAAE,EAAC;gBACtB,MAAM,YAAY,CAAC,IAAI,EAAE,CAAC;aAC7B;YACD,MAAM,WAAW,CAAC,KAAK,CAAC;gBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,IAAI,CAAC,yCAAyC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7F,CAAC,CAAC;QACP,CAAC;KAAA;CACJ,CAAA","file":"RemoveMentionCommand.js","sourcesContent":["import {SubCommand} from \"../../CommandManager\";\nimport {SlashCommandSubcommandBuilder} from \"@discordjs/builders\";\nimport {cmd} from \"../../../utils/cmd\";\nimport {embed} from \"../../../utils/embed\";\n\nexport const RemoveMentionCommand: SubCommand = {\n    definition: new SlashCommandSubcommandBuilder()\n        .setName('remove')\n        .setDescription('Remove mention from subscription notification')\n        .addStringOption(\n            opt => opt.setName('channel_id')\n                .setDescription('Youtube channel id')\n                .setRequired(true)\n        )\n        .addMentionableOption(\n            opt => opt.setName('mention')\n                .setDescription('Mentionable')\n                .setRequired(true)\n        ),\n\n    async handle(interaction){\n        let verify = await cmd.verifySubscription(interaction);\n        if(!verify){\n            return;\n        }\n        let {subscription, channelData} = verify;\n        let mention = interaction.options.getMentionable('mention').toString();\n        if(subscription.mention){\n            subscription.mention = subscription.mention.replace(mention, '');\n            if(subscription.mention === ''){\n                subscription.mention = null;\n            }\n        }\n        if(subscription.changed()){\n            await subscription.save();\n        }\n        await interaction.reply({\n            embeds: [embed.info(`Removed mention from notification for ${channelData.snippet.title}`)]\n        });\n    }\n}"]}