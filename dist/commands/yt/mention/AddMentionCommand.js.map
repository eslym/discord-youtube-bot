{"version":3,"sources":["../src/commands/yt/mention/AddMentionCommand.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,kDAAkE;AAClE,gDAA2C;AAC3C,4CAAuC;AAE1B,QAAA,iBAAiB,GAAe;IACzC,UAAU,EAAE,IAAI,wCAA6B,EAAE;SAC1C,OAAO,CAAC,KAAK,CAAC;SACd,cAAc,CAAC,0CAA0C,CAAC;SAC1D,eAAe,CACZ,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,YAAY,CAAC;SAC3B,cAAc,CAAC,oBAAoB,CAAC;SACpC,WAAW,CAAC,IAAI,CAAC,CACzB;SACA,oBAAoB,CACjB,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC;SACxB,cAAc,CAAC,aAAa,CAAC;SAC7B,WAAW,CAAC,IAAI,CAAC,CACzB;IAEC,MAAM,CAAC,WAAW;;YACpB,IAAI,MAAM,GAAG,MAAM,SAAG,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;YACvD,IAAG,CAAC,MAAM,EAAC;gBACP,OAAO;aACV;YACD,IAAI,EAAC,YAAY,EAAE,WAAW,EAAC,GAAG,MAAM,CAAC;YACzC,IAAI,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;YACvE,IAAG,CAAC,YAAY,CAAC,OAAO,EAAC;gBACrB,YAAY,CAAC,OAAO,GAAG,OAAO,CAAC;aAClC;iBAAM,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;gBACpD,YAAY,CAAC,OAAO,IAAI,OAAO,CAAC;aACnC;YACD,IAAG,YAAY,CAAC,OAAO,EAAE,EAAC;gBACtB,MAAM,YAAY,CAAC,IAAI,EAAE,CAAC;aAC7B;YACD,MAAM,WAAW,CAAC,KAAK,CAAC;gBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,IAAI,CAAC,qCAAqC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC;aACzF,CAAC,CAAC;QACP,CAAC;KAAA;CACJ,CAAA","file":"AddMentionCommand.js","sourcesContent":["import {SubCommand} from \"../../CommandManager\";\nimport {SlashCommandSubcommandBuilder} from \"@discordjs/builders\";\nimport {embed} from \"../../../utils/embed\";\nimport {cmd} from \"../../../utils/cmd\";\n\nexport const AddMentionCommand: SubCommand = {\n    definition: new SlashCommandSubcommandBuilder()\n        .setName('add')\n        .setDescription('Add mention to subscription notification')\n        .addStringOption(\n            opt => opt.setName('channel_id')\n                .setDescription('Youtube channel id')\n                .setRequired(true)\n        )\n        .addMentionableOption(\n            opt => opt.setName('mention')\n                .setDescription('Mentionable')\n                .setRequired(true)\n        ),\n\n    async handle(interaction){\n        let verify = await cmd.verifySubscription(interaction);\n        if(!verify){\n            return;\n        }\n        let {subscription, channelData} = verify;\n        let mention = interaction.options.getMentionable('mention').toString();\n        if(!subscription.mention){\n            subscription.mention = mention;\n        } else if (subscription.mention.search(mention) === -1) {\n            subscription.mention += mention;\n        }\n        if(subscription.changed()){\n            await subscription.save();\n        }\n        await interaction.reply({\n            embeds: [embed.info(`Added mention to notification for ${channelData.snippet.title}`)]\n        });\n    }\n}"]}