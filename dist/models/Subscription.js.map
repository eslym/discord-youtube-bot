{"version":3,"sources":["../src/models/Subscription.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAA2C;AAC3C,+DAAqF;AACrF,yCAAsC;AACtC,iDAA8C;AAC9C,qCAAkC;AAGlC,IAAa,YAAY,GAAzB,MAAa,YAAa,SAAQ,4BAAmB;IAGvC,MAAM,CAAC,MAAM,CAAC,IAAY;QAChC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;YACV,IAAI,CAAC,EAAE,GAAG,0BAAa,CAAC,QAAQ,EAAS,CAAC;SAC7C;IACL,CAAC;CAaJ,CAAA;AAVG;IADC,IAAA,6BAAM,EAAC,EAAC,IAAI,EAAE,qBAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAC,CAAC;;wCAC1C;AAGlB;IADC,IAAA,6BAAM,EAAC,EAAC,IAAI,EAAE,qBAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,gCAAgC,EAAC,CAAC;;wDACpE;AAGlC;IADC,IAAA,6BAAM,EAAC,EAAC,IAAI,EAAE,qBAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,gCAAgC,EAAC,CAAC;;4CAChF;AAGtB;IADC,IAAA,8BAAO,EAAC,GAAE,EAAE,CAAA,2BAAY,EAAE,iBAAiB,CAAC;;mDACR;AAhBrC;IADC,qCAAc;;qCACe,eAAM;;gCAInC;AAPQ,YAAY;IADxB,IAAA,4BAAK,EAAC,EAAC,SAAS,EAAE,eAAe,EAAE,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,YAAY,EAAC,CAAC;GACzE,YAAY,CAoBxB;AApBY,oCAAY","file":"Subscription.js","sourcesContent":["import { SnowflakeUtil } from \"discord.js\";\nimport { BeforeValidate, Column, HasMany, Model, Table } from \"sequelize-typescript\";\nimport { DataTypes } from \"sequelize\";\nimport { Notification } from \"./Notification\";\nimport { WebSub } from \"./WebSub\";\n\n@Table({tableName: 'subscriptions', createdAt: 'created_at', updatedAt: 'updated_at'})\nexport class Subscription extends Model<Subscription>{\n\n    @BeforeValidate\n    protected static makeId(self: WebSub) {\n        if (!self.id) {\n            self.id = SnowflakeUtil.generate() as any;\n        }\n    }\n\n    @Column({type: DataTypes.BIGINT.UNSIGNED, primaryKey: true})\n    public id: number;\n\n    @Column({type: DataTypes.BIGINT.UNSIGNED, allowNull: false, unique: 'websub_notification_on_channel'})\n    public discord_channel_id: number;\n    \n    @Column({type: DataTypes.BIGINT.UNSIGNED, allowNull: false, unique: 'websub_notification_on_channel'})\n    public sub_id: number;\n\n    @HasMany(()=>Notification, 'subscription_id')\n    public notifications: Notification[];\n}"]}