{"version":3,"sources":["../src/utils/cmd.ts"],"names":[],"mappings":";;;AACA,yDAAoD;AACpD,mCAA8B;AAEjB,QAAA,GAAG,GAAG;IACf,KAAK,CAAC,kBAAkB,CAAC,WAA+B;QACpD,IAAI,UAAU,GAAG,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;QAC7D,IAAI,OAAO,GAAgB,WAAW,CAAC,OAAsB,CAAC;QAC9D,IAAI,EAAC,MAAM,EAAE,YAAY,EAAC,GAAG,MAAM,2BAAY,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;QAC7E,IAAI,OAAO,GAAG,MAAM,MAAM,CAAC,uBAAuB,EAAE,CAAC;QACrD,IAAI,OAAO,KAAK,IAAI,EAAE;YAClB,MAAM,WAAW,CAAC,KAAK,CAAC;gBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,KAAK,CAAC,0CAA0C,UAAU,KAAK,CAAC,CAAC;aACnF,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;QAClC,IAAI,CAAC,YAAY,EAAE;YACf,MAAM,WAAW,CAAC,KAAK,CAAC;gBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,KAAK,CAAC,GAAG,OAAO,uBAAuB,KAAK,GAAG,CAAC,CAAC;aACnE,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,OAAO,EAAC,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,OAAO,EAAC,CAAC;IACxD,CAAC;CACJ,CAAA","file":"cmd.js","sourcesContent":["import {CommandInteraction, TextChannel} from \"discord.js\";\nimport {Subscription} from \"../models/Subscription\";\nimport {embed} from \"./embed\";\n\nexport const cmd = {\n    async verifySubscription(interaction: CommandInteraction) {\n        let channel_id = interaction.options.getString('channel_id');\n        let channel: TextChannel = interaction.channel as TextChannel;\n        let {websub, subscription} = await Subscription.tryFind(channel_id, channel);\n        let snippet = await websub.fetchYoutubeChannelMeta();\n        if (snippet === null) {\n            await interaction.reply({\n                embeds: [embed.error(`Cannot find youtube channel with ID: \\`${channel_id}\\`.`)]\n            });\n            return null;\n        }\n        let title = snippet.snippet.title;\n        if (!subscription) {\n            await interaction.reply({\n                embeds: [embed.error(`${channel} does not subscribe ${title}!`)]\n            });\n            return null;\n        }\n        return {websub, subscription, channelData: snippet};\n    }\n}"]}