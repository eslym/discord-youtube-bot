{"version":3,"sources":["../src/utils/cmd.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,yDAAoD;AACpD,mCAA8B;AAEjB,QAAA,GAAG,GAAG;IACT,kBAAkB,CAAC,WAA+B;;YACpD,IAAI,UAAU,GAAG,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;YAC7D,IAAI,OAAO,GAAgB,WAAW,CAAC,OAAsB,CAAC;YAC9D,IAAI,EAAC,MAAM,EAAE,YAAY,EAAC,GAAG,MAAM,2BAAY,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YAC7E,IAAI,OAAO,GAAG,MAAM,MAAM,CAAC,YAAY,EAAE,CAAC;YAC1C,IAAI,OAAO,KAAK,IAAI,EAAE;gBAClB,MAAM,WAAW,CAAC,KAAK,CAAC;oBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,KAAK,CAAC,0CAA0C,UAAU,KAAK,CAAC,CAAC;iBACnF,CAAC,CAAC;gBACH,OAAO,IAAI,CAAC;aACf;YACD,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;YAClC,IAAI,CAAC,YAAY,EAAE;gBACf,MAAM,WAAW,CAAC,KAAK,CAAC;oBACpB,MAAM,EAAE,CAAC,aAAK,CAAC,KAAK,CAAC,GAAG,OAAO,uBAAuB,KAAK,GAAG,CAAC,CAAC;iBACnE,CAAC,CAAC;gBACH,OAAO,IAAI,CAAC;aACf;YACD,OAAO,EAAC,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,OAAO,EAAC,CAAC;QACxD,CAAC;KAAA;CACJ,CAAA","file":"cmd.js","sourcesContent":["import {CommandInteraction, TextChannel} from \"discord.js\";\nimport {Subscription} from \"../models/Subscription\";\nimport {embed} from \"./embed\";\n\nexport const cmd = {\n    async verifySubscription(interaction: CommandInteraction){\n        let channel_id = interaction.options.getString('channel_id');\n        let channel: TextChannel = interaction.channel as TextChannel;\n        let {websub, subscription} = await Subscription.tryFind(channel_id, channel);\n        let snippet = await websub.fetchSnippet();\n        if (snippet === null) {\n            await interaction.reply({\n                embeds: [embed.error(`Cannot find youtube channel with ID: \\`${channel_id}\\`.`)]\n            });\n            return null;\n        }\n        let title = snippet.snippet.title;\n        if (!subscription) {\n            await interaction.reply({\n                embeds: [embed.error(`${channel} does not subscribe ${title}!`)]\n            });\n            return null;\n        }\n        return {websub, subscription, channelData: snippet};\n    }\n}"]}