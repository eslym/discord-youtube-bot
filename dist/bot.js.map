{"version":3,"sources":["../src/bot.ts"],"names":[],"mappings":";;;AAAA,2CAA2C;AAC3C,qCAAgC;AAChC,uEAAkE;AAClE,6DAAwD;AACxD,mCAAmC;AACnC,+CAA0C;AAE1C,IAAI,OAAO,GAAG,IAAI,oBAAO,EAAE,CAAC;AAE5B,OAAO,CAAC,GAAG,CACP,oBAAO,CAAC,KAAK,CAAC,MAAM,EACpB,oBAAO,CAAC,KAAK,CAAC,aAAa,EAC3B,oBAAO,CAAC,KAAK,CAAC,kBAAkB,EAChC,oBAAO,CAAC,KAAK,CAAC,cAAc,EAC5B,oBAAO,CAAC,KAAK,CAAC,eAAe,CAChC,CAAA;AAEY,QAAA,GAAG,GAAG,IAAI,mBAAM,CAAC,EAAC,OAAO,EAAC,CAAC,CAAC;AAEzC,WAAG,CAAC,EAAE,CAAC,OAAO,EAAE,IAAA,mBAAQ,EAAC,KAAK,IAAI,EAAE;IAChC,eAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAClC,IAAI,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;QAClC,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC,sCAAsC,CAAC,CAAC;QAC1D,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,EAAE,WAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtD,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,2BAA2B,CAAC,CAAC;QAC3D,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;QAC9C,eAAM,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;QACnE,eAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;KAC/B;IACD,yCAAmB,CAAC,IAAI,EAAE,CAAC;IAC3B,MAAM,+BAAc,CAAC,IAAI,EAAE,CAAC;AAChC,CAAC,CAAC,CAAC,CAAC","file":"bot.js","sourcesContent":["import {Client, Intents} from \"discord.js\";\r\nimport {logger} from \"./logger\";\r\nimport {SubscriptionManager} from \"./manager/SubscriptionManager\";\r\nimport {CommandManager} from \"./manager/CommandManager\";\r\nimport * as config from \"./config\";\r\nimport {catchLog} from \"./utils/catchLog\";\r\n\r\nlet intents = new Intents();\r\n\r\nintents.add(\r\n    Intents.FLAGS.GUILDS,\r\n    Intents.FLAGS.GUILD_MEMBERS,\r\n    Intents.FLAGS.GUILD_INTEGRATIONS,\r\n    Intents.FLAGS.GUILD_MESSAGES,\r\n    Intents.FLAGS.DIRECT_MESSAGES,\r\n)\r\n\r\nexport const bot = new Client({intents});\r\n\r\nbot.on('ready', catchLog(async () => {\r\n    logger.info('Discord bot ready.');\r\n    if (config.get('discord.inviteLink')) {\r\n        let url = new URL('https://discord.com/oauth2/authorize');\r\n        url.searchParams.set('client_id', bot.application.id);\r\n        url.searchParams.set('scope', 'bot applications.commands');\r\n        url.searchParams.set('permissions', '224256');\r\n        logger.info('Use the following link to add this bot into server.');\r\n        logger.info(url.toString());\r\n    }\r\n    SubscriptionManager.boot();\r\n    await CommandManager.boot();\r\n}));\r\n"]}