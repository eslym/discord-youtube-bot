{"version":3,"sources":["../src/bot.ts"],"names":[],"mappings":";;;AAAA,2CAA2C;AAC3C,qCAAgC;AAChC,uEAAkE;AAClE,6DAAwD;AACxD,+CAA0C;AAC1C,iCAAkC;AAElC,IAAI,OAAO,GAAG,IAAI,oBAAO,EAAE,CAAC;AAE5B,OAAO,CAAC,GAAG,CACP,oBAAO,CAAC,KAAK,CAAC,MAAM,EACpB,oBAAO,CAAC,KAAK,CAAC,aAAa,EAC3B,oBAAO,CAAC,KAAK,CAAC,kBAAkB,EAChC,oBAAO,CAAC,KAAK,CAAC,cAAc,EAC5B,oBAAO,CAAC,KAAK,CAAC,eAAe,CAChC,CAAA;AAEY,QAAA,GAAG,GAAG,IAAI,mBAAM,CAAC,EAAC,OAAO,EAAC,CAAC,CAAC;AAEzC,WAAG,CAAC,EAAE,CAAC,OAAO,EAAE,IAAA,mBAAQ,EAAC,KAAK,IAAI,EAAE;IAChC,eAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAClC,IAAI,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;QAClC,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC,sCAAsC,CAAC,CAAC;QAC1D,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,EAAE,WAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtD,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,2BAA2B,CAAC,CAAC;QAC3D,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;QAC9C,eAAM,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;QACnE,eAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;KAC/B;IACD,yCAAmB,CAAC,IAAI,EAAE,CAAC;IAC3B,MAAM,+BAAc,CAAC,IAAI,EAAE,CAAC;AAChC,CAAC,CAAC,CAAC,CAAC","file":"bot.js","sourcesContent":["import {Client, Intents} from \"discord.js\";\nimport {logger} from \"./logger\";\nimport {SubscriptionManager} from \"./manager/SubscriptionManager\";\nimport {CommandManager} from \"./manager/CommandManager\";\nimport {catchLog} from \"./utils/catchLog\";\nimport config = require(\"config\");\n\nlet intents = new Intents();\n\nintents.add(\n    Intents.FLAGS.GUILDS,\n    Intents.FLAGS.GUILD_MEMBERS,\n    Intents.FLAGS.GUILD_INTEGRATIONS,\n    Intents.FLAGS.GUILD_MESSAGES,\n    Intents.FLAGS.DIRECT_MESSAGES,\n)\n\nexport const bot = new Client({intents});\n\nbot.on('ready', catchLog(async () => {\n    logger.info('Discord bot ready.');\n    if (config.get('discord.inviteLink')) {\n        let url = new URL('https://discord.com/oauth2/authorize');\n        url.searchParams.set('client_id', bot.application.id);\n        url.searchParams.set('scope', 'bot applications.commands');\n        url.searchParams.set('permissions', '224256');\n        logger.info('Use the following link to add this bot into server.');\n        logger.info(url.toString());\n    }\n    SubscriptionManager.boot();\n    await CommandManager.boot();\n}));\n"]}